---
import Layout from '../layouts/Layout.astro';

const searchParams = new URL(Astro.request.url).searchParams;
const reason = searchParams.get('error') || 'payment_failed';

const errorMessages: Record<string, string> = {
  'payment_failed': 'El pago no pudo ser procesado',
  'cancelled': 'Has cancelado la operaciÃ³n de pago',
  'pending': 'Tu pago estÃ¡ pendiente de confirmaciÃ³n',
  'rejected': 'Tu pago fue rechazado',
  'unknown': 'OcurriÃ³ un error desconocido'
};

const errorMessage = errorMessages[reason] || errorMessages['unknown'];
---

<Layout title="Error en Pago | AMG Sneakers">

  <main class="min-h-screen bg-gradient-to-br from-red-50 to-red-100 pt-32 pb-20">
    <div class="max-w-2xl mx-auto px-6">
      
      <!-- CONTENEDOR PRINCIPAL -->
      <div class="bg-white rounded-[40px] shadow-2xl overflow-hidden">
        
        <!-- HEADER CON ICONO -->
        <div class="bg-gradient-to-r from-red-500 to-red-600 p-12 text-center">
          <div class="inline-block mb-6">
            <svg class="w-20 h-20 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
            </svg>
          </div>
          <h1 class="text-4xl font-black text-white uppercase tracking-tighter">
            Â¡Error en el Pago!
          </h1>
          <p class="text-white/80 text-sm font-bold mt-2">{errorMessage}</p>
        </div>

        <!-- CONTENIDO -->
        <div class="p-12 space-y-8">
          
          <!-- DETALLES DEL ERROR -->
          <div class="bg-red-50 rounded-2xl p-6 border-2 border-red-200">
            <h3 class="font-black text-sm uppercase text-red-900 mb-4">Â¿QuÃ© pasÃ³?</h3>
            <ul class="space-y-2 text-sm text-red-800 font-bold">
              <li>âœ— Tu pago no fue procesado exitosamente</li>
              <li>âœ— Tu carrito sigue guardado</li>
              <li>âœ— Puedes intentar de nuevo cuando quieras</li>
            </ul>
          </div>

          <!-- CONSEJOS -->
          <div class="bg-blue-50 rounded-2xl p-6 border-l-4 border-blue-400">
            <h3 class="font-black text-sm uppercase text-blue-900 mb-4">ðŸ’¡ Recomendaciones</h3>
            <ul class="text-sm text-blue-800 space-y-2 font-bold">
              <li>âœ“ Verifica que tu tarjeta tenga fondos suficientes</li>
              <li>âœ“ Comprueba los datos de tu tarjeta</li>
              <li>âœ“ Intenta con otro medio de pago</li>
              <li>âœ“ Contacta con tu banco si persiste el problema</li>
            </ul>
          </div>

          <!-- CÃ“DIGO DE ERROR -->
          <div class="bg-gray-50 rounded-2xl p-4 border border-gray-200">
            <p class="text-[9px] font-black uppercase text-gray-600 mb-2">CÃ³digo de Error</p>
            <p class="text-xs font-mono text-gray-700">{reason}</p>
          </div>

          <!-- BOTONES DE ACCIÃ“N -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4">
            <a href="/checkout" class="bg-red-600 text-white py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-red-700 transition-all text-center">
              Intentar de Nuevo
            </a>
            <a href="/" class="bg-gray-900 text-white py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-black transition-all text-center">
              Volver a Tienda
            </a>
          </div>

          <!-- SOPORTE -->
          <div class="bg-yellow-50 rounded-2xl p-6 border border-yellow-200 text-center">
            <p class="text-[10px] font-black uppercase text-yellow-900 mb-2">Â¿Necesitas Ayuda?</p>
            <p class="text-sm text-yellow-800 font-bold mb-4">Contacta con nuestro equipo de soporte</p>
            <a href="mailto:soporte@amgsneakers.cl" class="inline-block bg-yellow-500 text-white px-6 py-2 rounded-xl font-black text-[10px] uppercase hover:bg-yellow-600 transition-all">
              ðŸ“§ Enviar Email
            </a>
          </div>

        </div>
      </div>

    </div>
  </main>
</Layout>