---
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import WhatsAppChatBubbles from '../components/WhatsAppChatBubbles.astro';
import FounderMessage from '../components/FounderMessage.astro';
import FearFAQ from '../components/FearFAQ.astro';
import MiniGuia from '../components/MiniGuia.astro';
import QuizHero from '../components/QuizHero.astro';
import { productos } from '../data/products';
export const prerender = true;

// Featured products with "Famoso" tag
const famosos = productos
  .filter(p => p.tags?.includes('Famoso'))
  .slice(0, 6)
  .map(p => ({
    id: p.id,
    name: p.name,
    prices: p.prices,
    image: p.image,
    tags: p.tags || [],
    tallas: p.tallas || [],
  }));

// Hero product ‚Äî Travis Scott Olive
const heroProduct = productos.find(p => p.id === 'jordan-1-travis-olive')
  || productos.find(p => p.tags?.includes('Famoso'))!;
const heroImage = Array.isArray(heroProduct?.image) ? heroProduct.image[0] : heroProduct?.image;
const formattedHeroPrice = new Intl.NumberFormat('es-CL').format(heroProduct?.prices.PK || 95900);
---

<Layout
  title="AMG Sneakers | El par que buscabas, al precio que corresponde"
  description="Gesti√≥n directa de pares premium desde manufactura de √©lite a Chile. Calidad PK y G5. Control de calidad visual antes de cada despacho. Pago seguro por MercadoPago."
>
  <div class="bg-[#0A0A0A] overflow-x-hidden">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HERO ‚Äî Split screen
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="hero" class="min-h-[92vh] flex items-center pt-24 pb-16 relative overflow-hidden">

      <!-- Background glow (right) -->
      <div class="absolute right-0 top-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#16A34A] rounded-full blur-[200px] opacity-[0.06] pointer-events-none"></div>

      <div class="max-w-7xl mx-auto px-6 w-full">
        <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">

          <!-- LEFT ‚Äî Copy -->
          <div class="order-2 lg:order-1">

            <!-- Label -->
            <div class="anim-hero-badge inline-flex items-center gap-2 mb-6">
              <span class="text-[#16A34A] text-[9px] font-bold uppercase tracking-[0.3em]">
                GESTI√ìN DIRECTA ¬∑ CHILE 2026
              </span>
            </div>

            <!-- H1 -->
            <h1 class="anim-hero-h1 text-5xl md:text-6xl lg:text-7xl font-bold text-[#F5F5F5] leading-[1.05] mb-6" style="font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.03em;">
              El par que<br />
              buscabas,<br />
              <span class="text-[#16A34A]">al precio que<br />corresponde.</span>
            </h1>

            <!-- Subtitle -->
            <p class="anim-hero-subtitle text-[#888888] text-base leading-relaxed mb-8 max-w-md">
              Tu par favorito, tra√≠do directo de f√°brica, con fotos del par antes de enviarlo. Sin estafas, sin sorpresas, con MercadoPago.
            </p>

            <!-- CTAs -->
            <div class="anim-hero-ctas flex flex-wrap gap-3 mb-6">
              <a href="/coleccion" class="btn-primary text-sm px-7 py-4">
                Ver Cat√°logo
              </a>
              <a href="/sobre-nosotros" class="btn-secondary text-sm px-7 py-4">
                ¬øC√≥mo funciona?
              </a>
            </div>

            <!-- ‚îÄ‚îÄ Security badge strip ‚îÄ‚îÄ -->
            <div class="anim-hero-trust flex flex-wrap gap-x-4 gap-y-2 mb-5">
              {[
                { icon: 'üîí', label: 'SSL Seguro' },
                { icon: '‚úÖ', label: 'MercadoPago Oficial' },
                { icon: 'üì∏', label: 'QC Garantizado' },
                { icon: 'üõ°Ô∏è', label: 'Seguro Aduanero' },
              ].map(b => (
                <span class="inline-flex items-center gap-1.5 text-[10px] text-[#666666] bg-[#111111] border border-[#1E1E1E] rounded-sm px-2.5 py-1.5">
                  <span>{b.icon}</span>
                  <span>{b.label}</span>
                </span>
              ))}
            </div>

            <!-- ‚îÄ‚îÄ Real-time status ‚îÄ‚îÄ -->
            <div class="flex items-center gap-2">
              <span class="relative flex h-2 w-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-[#16A34A] opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-[#16A34A]"></span>
              </span>
              <p class="text-[11px] text-[#888888]">
                üü¢ Cat√°logo en l√≠nea con f√°brica. Gesti√≥n individual 1 a 1.
              </p>
            </div>

          </div>

          <!-- RIGHT ‚Äî Hero product image -->
          <div class="relative order-1 lg:order-2 flex items-center justify-center" style="min-height: 420px;">
            <!-- Glow behind shoe -->
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
              <div class="anim-hero-glow w-72 h-72 bg-[#16A34A] rounded-full blur-[100px] opacity-[0.12]"></div>
            </div>

            <!-- Floating grade badge -->
            <div class="absolute top-6 right-6 z-20 bg-[#16A34A] text-black text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 rounded-full shadow-lg">
              GRADO PK
            </div>

            <!-- Product image -->
            <div class="anim-hero-shoe relative z-10 w-full max-w-md">
              <img
                src={heroImage}
                alt={`${heroProduct?.name || 'Travis Scott Olive'} ‚Äî AMG Sneakers`}
                class="w-full h-auto object-contain drop-shadow-2xl"
                width={800}
                height={800}
                loading="eager"
                fetchpriority="high"
              />
            </div>

            <!-- Price badge -->
            <div class="absolute bottom-6 left-6 z-20 bg-[#111111] border border-[#2A2A2A] rounded-sm px-4 py-3">
              <p class="text-[9px] text-[#888888] uppercase tracking-widest mb-0.5">Precio de Gesti√≥n</p>
              <p class="text-lg font-bold text-[#16A34A]">
                ${formattedHeroPrice}&nbsp;<span class="text-xs text-[#888888] font-normal">CLP</span>
              </p>
              <a
                href={`/producto/${heroProduct?.id}`}
                class="mt-2.5 flex items-center justify-center gap-1.5 w-full bg-[#16A34A] hover:bg-[#22C55E] text-black text-[10px] font-bold uppercase tracking-wider py-2 rounded-sm transition-colors"
              >
                Ver Par ‚Üí
              </a>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MINI-GUIA & QUIZ (Trust Boosters pre-compra)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <MiniGuia />
    <QuizHero />

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TRUST STRIP ‚Äî 4 indicators
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="trust" class="bg-[#111111] border-y border-[#2A2A2A]">
      <div class="max-w-7xl mx-auto px-6 py-8">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">

          <div class="reveal flex flex-col items-center text-center gap-2" data-reveal-delay="0">
            <span class="text-2xl">üõ°Ô∏è</span>
            <div>
              <p class="text-[11px] font-bold text-[#F5F5F5] uppercase tracking-widest">Pago Seguro</p>
              <p class="text-[10px] text-[#888888] mt-0.5">MercadoPago</p>
            </div>
          </div>

          <div class="reveal flex flex-col items-center text-center gap-2" data-reveal-delay="80">
            <span class="text-2xl">üì∏</span>
            <div>
              <p class="text-[11px] font-bold text-[#F5F5F5] uppercase tracking-widest">QC Visual Previo</p>
              <p class="text-[10px] text-[#888888] mt-0.5">Fotos HD antes de enviar</p>
            </div>
          </div>

          <div class="reveal flex flex-col items-center text-center gap-2" data-reveal-delay="160">
            <span class="text-2xl">üöö</span>
            <div>
              <p class="text-[11px] font-bold text-[#F5F5F5] uppercase tracking-widest">Env√≠o con Seguimiento</p>
              <p class="text-[10px] text-[#888888] mt-0.5">Hasta tu puerta</p>
            </div>
          </div>

          <div class="reveal flex flex-col items-center text-center gap-2" data-reveal-delay="240">
            <span class="text-2xl">‚öñÔ∏è</span>
            <div>
              <p class="text-[11px] font-bold text-[#F5F5F5] uppercase tracking-widest">Seguro Aduanero</p>
              <p class="text-[10px] text-[#888888] mt-0.5 max-w-[120px]">Si lo retiene aduana, te lo remandamos gratis</p>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         FEATURED PRODUCTS ‚Äî Selecci√≥n Actual
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="productos" class="py-24">
      <div class="max-w-7xl mx-auto px-6">

        <!-- Header -->
        <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between mb-12 gap-4">
          <div class="reveal">
            <p class="text-[10px] font-bold text-[#16A34A] uppercase tracking-[0.3em] mb-2">Cat√°logo</p>
            <h2 class="text-3xl lg:text-4xl font-bold text-[#F5F5F5]" style="font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.02em;">
              Selecci√≥n Actual
              <span class="block w-12 h-0.5 bg-[#16A34A] mt-3"></span>
            </h2>
          </div>
          <a href="/coleccion" class="text-xs text-[#888888] hover:text-[#22C55E] uppercase tracking-widest font-semibold transition-colors flex items-center gap-1.5">
            Ver todo el cat√°logo
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          </a>
        </div>

        <!-- Product Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
          {famosos.map((product, i) => (
            <div class="reveal-init" style={`transition-delay: ${i * 80}ms`}>
              <ProductCard {...product} />
            </div>
          ))}
        </div>

      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HOW IT WORKS ‚Äî Critical trust section
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="como-funciona" class="py-24 bg-[#111111] border-y border-[#2A2A2A]">
      <div class="max-w-7xl mx-auto px-6">

        <div class="text-center mb-16">
          <p class="reveal text-[10px] font-bold text-[#16A34A] uppercase tracking-[0.3em] mb-3">¬øProceso?</p>
          <h2 class="reveal text-3xl lg:text-4xl font-bold text-[#F5F5F5] mb-3" style="font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.02em;" data-reveal-delay="80">
            ¬øC√≥mo funciona? Es simple.
          </h2>
          <p class="reveal text-[#888888] text-sm" data-reveal-delay="160">Transparencia total en cada paso</p>
        </div>

        <!-- Steps -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 relative">

          <!-- ANIMATIONS BLOCK START -->
          <!-- ANIMATIONS BLOCK START -->
          <!-- Connecting line & Desktop Animation (lg) -->
          <div class="hidden lg:block absolute top-[30px] left-[12.5%] right-[12.5%] h-px border-t border-dashed border-[#2A2A2A] z-0">
            <div class="absolute top-[-14px] left-0 text-2xl -ml-3" style="animation: desktopCart 7.5s linear infinite;">
              <span class="inline-block" style="transform: scaleX(-1);">üõí</span>
            </div>
            <!-- Camera: absolute so cam-flash child positions correctly -->
            <div class="absolute top-[-14px] left-[33.3%] text-2xl -ml-3" style="animation: desktopCam 7.5s linear infinite;">
              <span style="display:inline-block; animation: desktopCamPulse 7.5s linear infinite;">üì∏</span>
              <div class="cam-flash" style="animation: camFlash 7.5s linear infinite;">
                <div class="cam-flash-rays" style="animation: camFlashRays 7.5s linear infinite;"></div>
              </div>
            </div>
            <div class="absolute top-[-14px] left-[66.6%] text-xl -ml-3" style="animation: desktopPlane 7.5s linear infinite;">‚úàÔ∏è</div>
          </div>

          <!--
            Mobile S-Curve: SVG draws the visible path only.
            HTML divs are animated by JS using path.getPointAtLength() for pixel-perfect,
            zero-distortion emoji rendering at their natural browser size.
          -->
          <div class="block md:hidden absolute inset-0 z-0" id="mobileAnimWrap" style="pointer-events:none;overflow:visible;">
            <svg id="mSvg" class="w-full h-full" preserveAspectRatio="none" viewBox="0 0 100 500"
                 xmlns="http://www.w3.org/2000/svg">
              <path id="mSvgPath"
                d="M 50,30 C 90,105 90,165 50,225 C 10,285 10,355 50,430"
                fill="none" stroke="#16A34A" stroke-width="0.9" stroke-dasharray="3 8" opacity="0.5"/>
            </svg>
            <!-- Real HTML divs ‚Äì sized and positioned in pixels by JS; never distorted -->
            <div id="mEmojiCart" style="position:absolute;top:0;left:0;font-size:24px;line-height:1;opacity:0;will-change:transform;transform:translate(-50%,-50%);">
              <span style="display:inline-block;transform:scaleX(-1);">üõí</span>
            </div>
            <div id="mEmojiCam" style="position:absolute;top:0;left:0;font-size:24px;line-height:1;opacity:0;will-change:transform;transform:translate(-50%,-50%);">
              <span style="display:inline-block;">üì∏</span>
              <!-- flash burst ‚Äî cartoon starburst, shown/hidden by JS -->
              <div id="mCamFlash" class="m-cam-flash-burst" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);opacity:0;pointer-events:none;width:50px;height:50px;"></div>
            </div>
            <div id="mEmojiPlane" style="position:absolute;top:0;left:0;font-size:22px;line-height:1;opacity:0;will-change:transform;transform:translate(-50%,-50%);">‚úàÔ∏è</div>
          </div>

          <!-- Connecting line & Tablet Animation (md) -->
          <div class="hidden md:block lg:hidden absolute inset-0 z-0 pointer-events-none opacity-80">
            <div class="absolute top-[25%] left-[25%] right-[25%] h-px border-t border-dashed border-[#2A2A2A]"></div>
            <div class="absolute top-[75%] left-[25%] right-[25%] h-px border-t border-dashed border-[#2A2A2A]"></div>
            
            <div class="absolute -mt-3 -ml-3 text-2xl" style="animation: tabletCart 7.5s linear infinite;">
              <span class="inline-block" style="transform: scaleX(-1);">üõí</span>
            </div>
            <div class="absolute -mt-3 -ml-3 text-2xl" style="animation: tabletCam 7.5s linear infinite;">
              <span style="display:inline-block; animation: desktopCamPulse 7.5s linear infinite;">üì∏</span>
              <div class="cam-flash" style="animation: camFlash 7.5s linear infinite;">
                <div class="cam-flash-rays" style="animation: camFlashRays 7.5s linear infinite;"></div>
              </div>
            </div>
            <div class="absolute -mt-3 -ml-3 text-xl" style="animation: tabletPlane 7.5s linear infinite;">‚úàÔ∏è</div>
          </div>
          <!-- ANIMATIONS BLOCK END -->





          {[
            { num: '01', emoji: 'üîç', title: 'Elige tu par', desc: 'Elige el modelo y la talla. El precio que ves es el precio que pagas ‚Äî sin sorpresas.' },
            { num: '02', emoji: 'üí≥', title: 'Paga con seguridad', desc: 'Pagas en MercadoPago, igual que en Falabella o Ripley. Nosotros nunca tocamos tu tarjeta.' },
            { num: '03', emoji: 'üì∏', title: 'Aprueba el QC', desc: 'Te enviamos fotos y video HD del par espec√≠fico. T√∫ das el ok antes de que salga.' },
            { num: '04', emoji: 'üì¶', title: 'Lo recibes en casa', desc: 'Parte con seguimiento en tiempo real. Y si aduana lo retiene, te mandamos otro gratis. Sin drama, sin tr√°mites.' },
          ].map((step, i) => (
            <div class="reveal relative z-10 flex flex-col items-center text-center" data-reveal-delay={i * 120}>
              <div class="anim-step-circle w-16 h-16 rounded-full bg-[#0A0A0A] border-2 border-[#16A34A] flex items-center justify-center mb-4 flex-shrink-0 shadow-[0_0_20px_rgba(22,163,74,0.2)]" data-step-idx={i}>
                <span class="text-[#16A34A] text-sm font-bold">{step.num}</span>
              </div>
              <div class="text-2xl mb-3">{step.emoji}</div>
              <h3 class="text-sm font-bold text-[#F5F5F5] uppercase tracking-wide mb-2">{step.title}</h3>
              <p class="text-xs text-[#888888] leading-relaxed max-w-[200px]">{step.desc}</p>
            </div>
          ))}

        </div>

      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         WHATSAPP CHAT BUBBLES ‚Äî Social proof
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <WhatsAppChatBubbles />

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         AMG VS EL RESTO ‚Äî Comparison
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="py-24 reveal-init">
      <div class="max-w-5xl mx-auto px-6">

        <div class="text-center mb-12">
          <p class="text-[10px] font-bold text-[#16A34A] uppercase tracking-[0.3em] mb-3">Comparativa</p>
          <h2 class="text-3xl lg:text-4xl font-bold text-[#F5F5F5]" style="font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.02em;">
            AMG <span class="text-[#16A34A]">VS</span> El Resto
          </h2>
        </div>

        <div class="grid md:grid-cols-2 gap-px bg-[#2A2A2A] rounded-[2px] overflow-hidden">

          <!-- Tiendas Comunes -->
          <div class="bg-[#111111] p-8 md:p-10">
            <div class="flex items-center gap-3 mb-8">
              <div class="w-10 h-10 bg-red-900/20 border border-red-900/30 rounded-sm flex items-center justify-center text-lg">‚ùå</div>
              <h3 class="font-bold text-[#888888] uppercase tracking-wide text-sm">Tiendas Comunes</h3>
            </div>
            <ul class="space-y-5">
              {[
                { t: 'M√°rgenes excesivos.', d: 'Inflan los precios 200% sin importar la calidad real.' },
                { t: 'Materiales b√°sicos.', d: 'Venden sint√©ticos como si fueran materiales premium.' },
                { t: 'Sin revisi√≥n previa.', d: 'Compras a ciegas, te env√≠an lo que tienen.' },
                { t: 'Soporte inexistente.', d: 'Ning√∫n canal de comunicaci√≥n directo.' },
              ].map(item => (
                <li class="flex gap-3">
                  <span class="text-red-400 text-sm font-bold flex-shrink-0 w-4">‚Äî</span>
                  <p class="text-xs text-[#888888] leading-relaxed">
                    <strong class="text-[#888888] line-through">{item.t}</strong>{' '}{item.d}
                  </p>
                </li>
              ))}
            </ul>
          </div>

          <!-- AMG -->
          <div class="bg-[#0D1F10] border border-[#16A34A]/20 p-8 md:p-10 relative overflow-hidden">
            <div class="absolute -top-16 -right-16 w-48 h-48 bg-[#16A34A] rounded-full blur-[80px] opacity-10 pointer-events-none"></div>
            <div class="flex items-center gap-3 mb-8 relative z-10">
              <div class="w-10 h-10 bg-[#16A34A] rounded-sm flex items-center justify-center text-lg">‚ö°</div>
              <h3 class="font-bold text-[#F5F5F5] uppercase tracking-wide text-sm">AMG Sneakers</h3>
            </div>
            <ul class="space-y-5 relative z-10">
              {[
                { t: 'Gesti√≥n honesta.', d: 'Pagas el par + una comisi√≥n por nuestro servicio. Sin precios inflados.' },
                { t: 'Calidad industrial.', d: 'Solo seleccionamos materiales reales que duran.' },
                { t: 'Inspecci√≥n HD.', d: 'Somos tus ojos en la f√°brica. Si el par no es perfecto, no se env√≠a.' },
                { t: 'Comunicaci√≥n directa.', d: 'WhatsApp directo con el equipo en cada etapa.' },
              ].map(item => (
                <li class="flex gap-3 border-l-2 border-[#16A34A] pl-3">
                  <p class="text-xs text-[#F5F5F5]/80 leading-relaxed">
                    <strong class="text-[#F5F5F5]">{item.t}</strong>{' '}{item.d}
                  </p>
                </li>
              ))}
            </ul>
          </div>

        </div>

      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         FEAR FAQ ‚Äî Objection handling
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <FearFAQ />

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TRUST MANIFESTO ‚Äî Quote + Stats
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="manifesto" class="py-24 bg-[#111111] border-y border-[#2A2A2A]">
      <div class="max-w-5xl mx-auto px-6">

        <!-- Quote -->
        <div class="reveal text-center mb-16">
          <div class="w-8 h-8 mx-auto mb-6 opacity-30">
            <svg viewBox="0 0 32 32" fill="currentColor" class="text-[#16A34A]">
              <path d="M10 8v8H6v8H0V8h10zm18 0v8h-4v8h-6V8h10z"/>
            </svg>
          </div>
          <blockquote class="text-xl md:text-2xl lg:text-3xl font-light text-[#F5F5F5] leading-relaxed italic max-w-3xl mx-auto mb-6" style="font-family: 'Space Grotesk', sans-serif;">
            "Nacimos de la frustraci√≥n de ver c√≥mo se castiga al consumidor
            que no tiene un presupuesto de miles."
          </blockquote>
          <cite class="text-[#888888] text-xs uppercase tracking-widest not-italic">
            ‚Äî Fundadores, AMG Sneakers
          </cite>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-3 gap-8 border-t border-[#2A2A2A] pt-12">
          {[
            { val: '90', suffix: '%', label: 'Inversi√≥n en el par' },
            { val: '0', suffix: '', label: 'Intermediarios en la cadena' },
            { val: '100', suffix: '%', label: 'Gesti√≥n QC antes de enviar' },
          ].map((stat, i) => (
            <div class="reveal text-center" data-reveal-delay={i * 120}>
              <p
                class="text-3xl md:text-4xl font-bold text-[#16A34A] mb-2"
                style="font-family: 'Space Grotesk', sans-serif;"
                data-counter-target={stat.val}
                data-counter-suffix={stat.suffix}
              >
                {stat.val}{stat.suffix}
              </p>
              <p class="text-[10px] text-[#888888] uppercase tracking-wider leading-relaxed">
                {stat.label}
              </p>
            </div>
          ))}
        </div>

      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         FOUNDER MESSAGE ‚Äî Authenticity
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <FounderMessage />

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         FINAL CTA
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="py-32 relative overflow-hidden">
      <!-- Subtle radial green -->
      <div class="absolute inset-0 pointer-events-none">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-[#16A34A] rounded-full blur-[160px] opacity-[0.08]"></div>
      </div>

      <div class="relative z-10 max-w-3xl mx-auto px-6 text-center">
        <p class="reveal text-[10px] font-bold text-[#16A34A] uppercase tracking-[0.3em] mb-4">¬øListo para empezar?</p>
        <h2 class="reveal text-4xl md:text-5xl lg:text-6xl font-bold text-[#F5F5F5] leading-tight mb-6" style="font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.03em;" data-reveal-delay="100">
          Tu pr√≥ximo par<br />
          <span class="text-[#16A34A]">ya est√° disponible.</span>
        </h2>
        <p class="reveal text-[#888888] text-sm mb-10 max-w-md mx-auto" data-reveal-delay="200">
          Compramos el par en f√°brica y te lo traemos a Chile. T√∫ ves las fotos antes de que salga.
        </p>
        <div class="reveal flex flex-col sm:flex-row gap-3 justify-center" data-reveal-delay="300">
          <a href="/coleccion" class="btn-primary text-sm px-10 py-4">
            Ver Cat√°logo
          </a>
          <a href="/calidades" class="btn-secondary text-sm px-10 py-4">
            Gu√≠a de Calidades
          </a>
        </div>
      </div>
    </section>

  </div>
</Layout>

<style>
  /* ‚ïê‚ïê‚ïê DESKTOP ANIMATIONS ‚ïê‚ïê‚ïê */
  @keyframes desktopCart {
    0%   { left: 0%;    opacity: 0; }
    3%   { left: 1%;    opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    30%  { left: 31%;   opacity: 1; }
    32%  { left: 33.3%; opacity: 0.2; }
    33%  { left: 33.3%; opacity: 0; }
    100% { left: 33.3%; opacity: 0; }
  }
  /* desktopCam moves position only ‚Äî no flash/scale mixed in */
  @keyframes desktopCam {
    0%   { left: 33.3%; opacity: 0; }
    33%  { left: 33.3%; opacity: 0; }
    35%  { left: 34.5%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    64%  { left: 64.5%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    66%  { left: 66.6%; opacity: 0; }
    100% { left: 66.6%; opacity: 0; }
  }
  /* Camera emoji: squash ‚Üí pop ‚Üí settle (classic cartoon anticipation arc) */
  @keyframes desktopCamPulse {
    0%    { transform: scale(1); }
    /* Squash / anticipation ‚Äî camera shrinks just before the flash */
    38%   { transform: scale(1); }
    41%   { transform: scale(0.72); }
    43%   { transform: scale(0.72); }
    /* POP ‚Äî flash fires here, camera bursts open */
    45%   { transform: scale(1.35); }
    /* Overshoot settle */
    48%   { transform: scale(1.12); }
    51%   { transform: scale(1); }
    100%  { transform: scale(1); }
  }
  /* ‚îÄ‚îÄ Camera flash: soft glow + subtle rays ‚îÄ‚îÄ */
  .cam-flash {
    position: absolute;
    top: 50%; left: 50%;
    width: 0; height: 0;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 10;
  }
  /* Soft radial glow core */
  .cam-flash::before {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 0; height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.95) 0%, rgba(255,255,240,0.5) 40%, rgba(255,255,255,0) 75%);
    animation: camFlashCore 7.5s linear infinite;
  }
  /* Outer rays ‚Äî 6 soft thin rays, low opacity */
  .cam-flash-rays {
    position: absolute;
    top: 50%; left: 50%;
    width: 0; height: 0;
    transform: translate(-50%, -50%) rotate(0deg);
    pointer-events: none;
  }
  .cam-flash-rays::before {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 0; height: 0;
    border-radius: 50%;
    background: conic-gradient(
      rgba(255,255,255,0.55) 0deg   6deg,
      rgba(255,255,255,0)    6deg  54deg,
      rgba(255,255,255,0.55) 54deg  60deg,
      rgba(255,255,255,0)    60deg 114deg,
      rgba(255,255,255,0.55) 114deg 120deg,
      rgba(255,255,255,0)    120deg 174deg,
      rgba(255,255,255,0.55) 174deg 180deg,
      rgba(255,255,255,0)    180deg 234deg,
      rgba(255,255,255,0.55) 234deg 240deg,
      rgba(255,255,255,0)    240deg 294deg,
      rgba(255,255,255,0.55) 294deg 300deg,
      rgba(255,255,255,0)    300deg 360deg
    );
    animation: camFlashRays 7.5s linear infinite;
  }
  @keyframes camFlashCore {
    0%    { width: 0;    height: 0;    opacity: 0; }
    43%   { width: 0;    height: 0;    opacity: 0; }
    44%   { width: 16px; height: 16px; opacity: 1; }
    45%   { width: 28px; height: 28px; opacity: 0.85; }
    48%   { width: 36px; height: 36px; opacity: 0.3; }
    51%   { width: 40px; height: 40px; opacity: 0; }
    100%  { width: 0;    height: 0;    opacity: 0; }
  }
  @keyframes camFlashRays {
    0%    { width: 0;    height: 0;    opacity: 0; }
    43%   { width: 0;    height: 0;    opacity: 0; }
    45%   { width: 48px; height: 48px; opacity: 0.6; }
    48%   { width: 60px; height: 60px; opacity: 0.3; }
    51%   { width: 64px; height: 64px; opacity: 0; }
    100%  { width: 0;    height: 0;    opacity: 0; }
  }
  /* Mobile flash burst (JS-controlled) ‚Äî same soft style */
  .m-cam-flash-burst {
    border-radius: 50%;
    background: conic-gradient(
      rgba(255,255,255,0.5) 0deg   6deg,
      rgba(255,255,255,0)   6deg  54deg,
      rgba(255,255,255,0.5) 54deg  60deg,
      rgba(255,255,255,0)   60deg 114deg,
      rgba(255,255,255,0.5) 114deg 120deg,
      rgba(255,255,255,0)   120deg 174deg,
      rgba(255,255,255,0.5) 174deg 180deg,
      rgba(255,255,255,0)   180deg 234deg,
      rgba(255,255,255,0.5) 234deg 240deg,
      rgba(255,255,255,0)   240deg 294deg,
      rgba(255,255,255,0.5) 294deg 300deg,
      rgba(255,255,255,0)   300deg 360deg
    );
  }
  @keyframes desktopPlane {
    0%   { left: 66.6%; opacity: 0; }
    66%  { left: 66.6%; opacity: 0; }
    68%  { left: 67.5%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    97%  { left: 99%;   opacity: 1; }
    100% { left: 100%;  opacity: 0; }
  }

  /* ‚ïê‚ïê‚ïê TABLET ANIMATIONS ‚ïê‚ïê‚ïê */
  @keyframes tabletCart {
    0%   { top: 25%; left: 25%; opacity: 0; }
    4%   { top: 25%; left: 26%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    31%  { top: 25%; left: 73%; opacity: 1; }
    33%  { top: 25%; left: 75%; opacity: 0; }
    100% { top: 25%; left: 75%; opacity: 0; }
  }
  @keyframes tabletCam {
    0%   { top: 25%; left: 75%; opacity: 0; }
    33%  { top: 25%; left: 75%; opacity: 0; }
    35%  { top: 27%; left: 73%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    64%  { top: 73%; left: 27%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    66%  { top: 75%; left: 25%; opacity: 0; }
    100% { top: 75%; left: 25%; opacity: 0; }
  }
  @keyframes tabletPlane {
    0%   { top: 75%; left: 25%; opacity: 0; }
    66%  { top: 75%; left: 25%; opacity: 0; }
    68%  { top: 75%; left: 27%; opacity: 1; filter: drop-shadow(0 0 6px rgba(22,163,74,0.5)); }
    97%  { top: 75%; left: 73%; opacity: 1; }
    100% { top: 75%; left: 75%; opacity: 0; }
  }
</style>

<script>
  /* ‚îÄ‚îÄ‚îÄ Mobile S-Curve emoji animation via JS getPointAtLength ‚îÄ‚îÄ‚îÄ */
  function initMobileAnim() {
    const CYCLE = 7500; // ms ‚Äî must match CSS animation duration

    const wrap  = document.getElementById('mobileAnimWrap');
    const svg   = document.getElementById('mSvg') as SVGSVGElement | null;
    const path  = document.getElementById('mSvgPath') as SVGPathElement | null;
    const cart  = document.getElementById('mEmojiCart') as HTMLElement | null;
    const cam   = document.getElementById('mEmojiCam')  as HTMLElement | null;
    const plane = document.getElementById('mEmojiPlane') as HTMLElement | null;
    const flash = document.getElementById('mCamFlash')  as HTMLElement | null;

    if (!wrap || !svg || !path || !cart || !cam || !plane || !flash) return;

    // Only run on mobile (< md = 768px)
    const mq = window.matchMedia('(max-width: 767px)');
    if (!mq.matches) return;

    // Make wrap visible by removing overflow:hidden from its grid parent
    const gridParent = wrap.parentElement;
    if (gridParent) gridParent.style.overflow = 'visible';

    let totalLen: number;
    try {
      totalLen = path.getTotalLength();
    } catch(e) {
      return; // SVG not ready
    }
    if (!totalLen) return;

    let startTime: number | null = null;
    let rafId: number;

    // Smooth easing helpers
    function easeInOut(t: number): number {
      return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
    }
    function clamp(v: number, lo: number, hi: number): number {
      return Math.max(lo, Math.min(hi, v));
    }
    function rangeFade(t: number, inStart: number, inEnd: number, outStart: number, outEnd: number): number {
      if (t < inStart || t > outEnd) return 0;
      if (t < inEnd)  return clamp((t - inStart)  / (inEnd  - inStart),  0, 1);
      if (t > outStart) return clamp(1 - (t - outStart) / (outEnd - outStart), 0, 1);
      return 1;
    }

    // Convert SVG path point ‚Üí wrap-relative pixels
    function pathPxAt(lengthFrac: number): { x: number; y: number } {
      const ptSvg = path!.getPointAtLength(clamp(lengthFrac, 0, 1) * totalLen);
      const ctm = svg!.getScreenCTM();
      if (!ctm) return { x: 0, y: 0 };
      const screenX = ctm.a * ptSvg.x + ctm.c * ptSvg.y + ctm.e;
      const screenY = ctm.b * ptSvg.x + ctm.d * ptSvg.y + ctm.f;
      const wrapRect = wrap!.getBoundingClientRect();
      return { x: screenX - wrapRect.left, y: screenY - wrapRect.top };
    }

    function placeEmoji(el: HTMLElement, pos: { x: number; y: number }, scale = 1) {
      el.style.transform = `translate(${pos.x}px, ${pos.y}px) translate(-50%, -50%) scale(${scale})`;
    }

    function frame(ts: number) {
      if (!startTime) startTime = ts;
      const t = ((ts - startTime) % CYCLE) / CYCLE; // 0 ‚Üí 1

      /* ‚îÄ‚îÄ CART: 0%‚Üí33%, path progress 0‚Üí0.33 ‚îÄ‚îÄ */
      const cartOpacity = rangeFade(t, 0.02, 0.05, 0.28, 0.33);
      if (cartOpacity > 0) {
        const pathFrac = t <= 0.33 ? (t / 0.33) * 0.33 : 0.33;
        placeEmoji(cart!, pathPxAt(pathFrac));
      }
      cart!.style.opacity = String(cartOpacity);

      /* ‚îÄ‚îÄ CAMERA: 33%‚Üí66%, cartoon squash‚Üípop‚Üísettle ‚îÄ‚îÄ */
      const camOpacity = rangeFade(t, 0.33, 0.37, 0.62, 0.66);
      if (camOpacity > 0) {
        const seg = clamp((t - 0.33) / 0.33, 0, 1); // 0‚Üí1 within its segment
        const pathFrac = 0.33 + seg * 0.33;
        // Squash-pop scale: 1 ‚Üí shrink ‚Üí POP ‚Üí settle
        let sc = 1;
        const localT = (t - 0.33) / 0.33; // 0‚Üí1 in cam segment
        if (localT >= 0.15 && localT < 0.27)      sc = 1 - 0.3 * easeInOut((localT - 0.15) / 0.12);  // shrink
        else if (localT >= 0.27 && localT < 0.36) sc = 0.7 + 0.8 * easeInOut((localT - 0.27) / 0.09); // POP
        else if (localT >= 0.36 && localT < 0.45) sc = 1.5 - 0.15 * easeInOut((localT - 0.36) / 0.09); // overshoot settle
        else if (localT >= 0.45 && localT < 0.52) sc = 1.35 - 0.35 * easeInOut((localT - 0.45) / 0.07); // settle to 1
        placeEmoji(cam!, pathPxAt(pathFrac), sc);
      }
      cam!.style.opacity = String(camOpacity);

      /* Flash burst: fires at localT ‚âà 0.36 (the POP peak) ‚Äî cartoon starburst */
      const flashLocalT = (t - 0.33) / 0.33;
      let flashScale = 0;
      let flashOpacity = 0;
      if (flashLocalT >= 0.27 && flashLocalT < 0.50) {
        const fp = clamp((flashLocalT - 0.27) / 0.23, 0, 1);
        // Fast pop then fade
        flashScale   = fp < 0.22 ? fp / 0.22 : 1 + (fp - 0.22) * 0.6; // 0‚Üí1‚Üí1.6
        flashOpacity = fp < 0.22 ? 1 : 1 - (fp - 0.22) / 0.78;
      }
      flash!.style.transform = `translate(-50%, -50%) scale(${flashScale}) rotate(${(t * 360).toFixed(0)}deg)`;
      flash!.style.opacity   = String(camOpacity > 0 ? flashOpacity : 0);

      /* ‚îÄ‚îÄ PLANE: 66%‚Üí100%, path progress 0.66‚Üí1 ‚îÄ‚îÄ */
      const planeOpacity = rangeFade(t, 0.66, 0.70, 0.94, 0.99);
      if (planeOpacity > 0) {
        const seg = clamp((t - 0.66) / 0.34, 0, 1);
        placeEmoji(plane!, pathPxAt(0.66 + seg * 0.34));
      }
      plane!.style.opacity = String(planeOpacity);

      rafId = requestAnimationFrame(frame);
    }

    rafId = requestAnimationFrame(frame);
  }

  // Run after layout is complete
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMobileAnim);
  } else {
    // Small delay to let the grid lay out and SVG paint
    requestAnimationFrame(() => requestAnimationFrame(initMobileAnim));
  }
</script>
